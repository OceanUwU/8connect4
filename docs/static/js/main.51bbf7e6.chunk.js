(this.webpackJsonp8connect4=this.webpackJsonp8connect4||[]).push([[0],{118:function(e,t,n){},124:function(e){e.exports=JSON.parse('"wss://8c4server.ocean.lol"')},150:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){"use strict";n.r(t);n(149),n(150);var a=n(136),r=Object(a.a)({palette:{type:"dark",background:{default:"#050505"},primary:{main:"#d49a3d"}},overrides:{MuiButton:{textPrimary:{background:"linear-gradient(45deg, #ff7b00 0%, #ff00ff 100%)",borderRadius:3,border:0,color:"white !important",padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"},textSecondary:{background:"linear-gradient(45deg, rgb(255,37,180) 30%, rgb(198,19,19) 90%)",borderRadius:3,border:0,color:"white !important",padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)"}}}}),c=n(16),i=n.n(c),o=n(21),s=n(31),l=n(1),d=n(0),u=n.n(d),h=n(11),m=n.n(h),j=n(250),b=n(249),f=n(123),p=n.n(f),g=n(124),O=n(71),x=n(72),y=n(45),v=n(87),w=n(86),I=n(5),C=n(195),N=n(271),k=n(248),S=n(246),E=n(247),B=n(245),T=function(e){Object(v.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(O.a)(this,n),(a=t.call(this,e)).state={open:!1},a.handleOpen=a.handleOpen.bind(Object(y.a)(a)),a.handleClose=a.handleClose.bind(Object(y.a)(a)),a}return Object(x.a)(n,[{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e=this.props.classes;return Object(l.jsx)("div",{children:Object(l.jsxs)(N.a,{open:this.state.open,onClose:this.handleClose,disablePortal:!0,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:this.props.required,disableEscapeKeyDown:this.props.required,children:[Object(l.jsx)(B.a,{id:"alert-dialog-title",children:this.props.title}),Object(l.jsxs)(S.a,{dividers:!0,children:[Object(l.jsx)(E.a,{className:e.text,id:"alert-dialog-description",children:this.props.description}),this.props.children]}),Object(l.jsxs)(k.a,{children:[this.props.required?null:Object(l.jsx)(C.a,{onClick:this.handleClose,color:"secondary",children:"Close"}),this.props.buttonText?Object(l.jsx)(C.a,{onClick:this.props.buttonAction,color:"primary",children:this.props.buttonText}):null]})]})})}}]),n}(u.a.Component),M=Object(I.a)((function(e){return{text:{margin:0}}}))(T);function A(){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(i.a.mark((function e(){var t,n,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=a.length>1&&void 0!==a[1]?a[1]:null,e.abrupt("return",new Promise(function(){var e=Object(s.a)(i.a.mark((function e(a){var c,d,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.assign({title:"Dialog title",required:!1},t),d="dialog".concat(t.layer?t.layer:0),null==(u=document.getElementById(d))&&((u=document.createElement("div")).id=d,document.getElementById("dialog").appendChild(u)),m.a.render(Object(l.jsxs)(b.a,{theme:r,children:[Object(l.jsx)(j.a,{}),Object(l.jsx)(M,Object(o.a)(Object(o.a)({},t),{},{ref:function(e){return c=e},children:n}))]}),u),c?(c.handleOpen(),a(c)):setTimeout(Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,A(t,n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),100);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=A,R=(n(118),n(251));var z=function(){return Object(l.jsxs)("div",{className:"centred",children:[Object(l.jsx)(R.a,{}),Object(l.jsx)("h3",{children:"Attempting to connect to the 8connect4 server..."})]})},D=n(77),G=n.n(D);var P=function(e){return Object(l.jsxs)("div",{className:"centred",children:[Object(l.jsx)(G.a,{}),Object(l.jsx)("h3",{children:"Failed to connect to the 8connect4 server."}),e.error?Object(l.jsxs)("p",{children:['Error: "',e.error,'"']}):null,Object(l.jsx)("h4",{children:"Are you offline? If not, the 8connect4 server might be down."}),Object(l.jsx)(C.a,{size:"large",color:"primary",onClick:function(){return window.location.reload(!1)},children:"Retry"})]})},J=n(261),F=n(65),H=n(258),q=n(253),K=n(4),U=n(196),_=n(199),Y=n(197),Q=n(252),V=n(200),X=n(126),Z=n.n(X),$=function(e){Object(v.a)(n,e);var t=Object(w.a)(n);function n(e){var a;return Object(O.a)(this,n),(a=t.call(this,e)).state={code:""},a.changeInput=a.changeInput.bind(Object(y.a)(a)),a.tryCode=a.tryCode.bind(Object(y.a)(a)),a}return Object(x.a)(n,[{key:"changeInput",value:function(e){var t=e.target.value;t=t.replace(" ",""),this.setState({code:t})}},{key:"tryCode",value:function(){Ln.emit("joinMatch",this.state.code)}},{key:"componentDidMount",value:function(){var e=this;window.location.search.length>1&&(this.setState({code:window.location.search.slice(1)},(function(){return e.tryCode()})),window.history.pushState("","","/"))}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(l.jsxs)("div",{children:[Object(l.jsx)("label",Object(o.a)(Object(o.a)({},{}),{},{htmlFor:"roomCodeInput",children:"Or, join by code:"})),Object(l.jsx)("br",{}),Object(l.jsxs)(U.a,{className:Object(K.a)(t.margin,t.textField),variant:"filled",children:[Object(l.jsx)(Y.a,{htmlFor:"roomCodeInput",children:"Room code"}),Object(l.jsx)(_.a,{id:"roomCodeInput",type:"text",value:this.state.code,onChange:this.changeInput,autoComplete:"off",inputProps:{className:t.textInput,maxLength:6,onKeyDown:function(t){"Enter"==t.key&&e.tryCode()}},endAdornment:Object(l.jsx)(Q.a,{position:"end",children:Object(l.jsx)(V.a,{"aria-label":"Join",onClick:this.tryCode,edge:"end",children:Object(l.jsx)(Z.a,{})})})})]})]})}}]),n}(u.a.Component),ee=Object(I.a)((function(e){return{margin:{margin:e.spacing(1),marginBottom:0},joinLabel:{display:"inline-block",marginTop:22,marginRight:4},textField:{width:"18ch"},textInput:{textTransform:"uppercase"}}}))($),te=n(15),ne=n(255),ae=n(254),re=n(127),ce=n.n(re),ie=Object(q.a)((function(e){return{margin:{margin:e.spacing(1)},input:{width:170},label:{textAlign:"center"}}}));var oe=function(){var e=ie(),t=u.a.useState(localStorage.name?localStorage.name:""),n=Object(te.a)(t,2),a=n[0],r=n[1],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||r(e),localStorage.name=e,Ln.emit("changeName",e)};return c(a,!0),Object(l.jsx)("div",{className:e.margin,children:Object(l.jsxs)(ae.a,{container:!0,justify:"center",spacing:1,alignItems:"flex-end",children:[Object(l.jsx)(ae.a,{item:!0,children:Object(l.jsx)(ce.a,{})}),Object(l.jsx)(ae.a,{item:!0,children:Object(l.jsx)(ne.a,{id:"nameInput",label:"Your name",value:a,onChange:function(e){return c(e.target.value)},autoComplete:"off",inputProps:{className:e.input,maxLength:12,onKeyDown:function(e){"Enter"==e.key&&document.activeElement.blur()}},InputLabelProps:{className:e.label}})})]})})},se=n(28),le=n(257),de=n(198),ue=n(259),he=n(272),me=n(260),je=n(269),be=n(205),fe=n(273),pe=n(203),ge=n(274),Oe=n(270),xe=n(82),ye=n.n(xe),ve=n(81),we=n.n(ve),Ie=n(80),Ce=[1,25],Ne=[1,4],ke=Object(q.a)((function(e){return{formControl:{margin:e.spacing(1)},select:{width:50}}})),Se=[5,8,12,15,20,25,30,45,60,120,200,300],Ee=function(e){return"".concat(Se[e],"s")},Be=Object(o.a)(Object(o.a)({},Ie),localStorage.MatchOptions?JSON.parse(localStorage.MatchOptions):{});function Te(e){return Object(l.jsxs)(le.a,{size:"small",children:[Object(l.jsx)(C.a,{onClick:function(){return e.fn(-10)},disabled:e.disabled||e.state==e.min,children:"- -"}),Object(l.jsx)(C.a,{onClick:function(){return e.fn(-1)},disabled:e.disabled||e.state==e.min,children:"-"}),Object(l.jsx)(C.a,{disabled:!0,children:e.state}),Object(l.jsx)(C.a,{onClick:function(){return e.fn(1)},disabled:e.disabled||e.state==e.max,children:"+"}),Object(l.jsx)(C.a,{onClick:function(){return e.fn(10)},disabled:e.disabled||e.state==e.max,children:"++"})]})}function Me(e){var t=ke(),n=function(){e.editable&&e.started&&Ln.emit("updateOptions",Be)},a=u.a.useState(Be.public),r=Object(te.a)(a,2),c=r[0],i=r[1],o=u.a.useState(Be.players),s=Object(te.a)(o,2),d=s[0],h=s[1],m=u.a.useState(Be.gameMax),j=Object(te.a)(m,2),b=j[0],f=j[1],p=u.a.useState(Be.lineLength),g=Object(te.a)(p,2),O=g[0],x=g[1],y=u.a.useState(Be.columns),v=Object(te.a)(y,2),w=v[0],I=v[1],N=function(e){Be.columns=e.target.value,I(e.target.value),n()},k=u.a.useState(Be.rows),S=Object(te.a)(k,2),E=S[0],B=S[1],T=function(e){Be.rows=e.target.value,B(e.target.value),n()},M=u.a.useState(Se.indexOf(Be.turnTime)),A=Object(te.a)(M,2),L=A[0],W=A[1],R=u.a.useState(Be.runDownTimer),z=Object(te.a)(R,2),D=z[0],G=z[1],P=u.a.useState(Be.customBots),J=Object(te.a)(P,2),q=J[0],K=J[1],_=u.a.useState(Be.names),Y=Object(te.a)(_,2),Q=Y[0],V=Y[1],X=function(){i(Be.public),h(Be.players),f(Be.gameMax),x(Be.lineLength),I(Be.columns),B(Be.rows),W(Se.indexOf(Be.turnTime)),G(Be.runDownTimer)};return u.a.useEffect((function(){return window.addEventListener("matchOptionsChanged",X),function(){return window.removeEventListener("matchOptionsChanged",X)}}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)(H.a,{style:{marginTop:16}}),Object(l.jsxs)(U.a,{className:t.formControl,children:[Object(l.jsx)(de.a,{children:"Privacy"}),Object(l.jsx)(F.a,{component:"div",children:Object(l.jsxs)(ae.a,{component:"label",container:!0,alignItems:"center",spacing:1,children:[Object(l.jsx)(ae.a,{item:!0,children:Object(l.jsx)(we.a,{})}),Object(l.jsx)(ae.a,{item:!0,children:Object(l.jsx)(ue.a,{color:"primary",checked:c,onChange:function(e){Be.public=!c,i(!c),n()},disabled:!e.editable})}),Object(l.jsx)(ae.a,{item:!0,children:Object(l.jsx)(ye.a,{})})]})}),e.started?Object(l.jsx)(C.a,{color:e.editable?"primary":"disabled",size:"small",onClick:function(){return Ln.emit("newRoomCode")},disabled:!e.editable,children:"New room code"}):null]}),e.started?null:Object(l.jsxs)("span",{children:[Object(l.jsx)(H.a,{}),Object(l.jsxs)(U.a,{className:t.formControl,children:[Object(l.jsx)(de.a,{style:{marginBottom:5},children:"Max players"}),Object(l.jsx)(Te,{fn:function(e){Be.players+=e,Be.players<Ce[0]&&(Be.players=Ce[0]),Be.players>Ce[1]&&(Be.players=Ce[1]),h(Be.players),n()},min:Ce[0],max:Ce[1],state:d,disabled:!e.editable})]})]}),Object(l.jsx)(H.a,{}),Object(l.jsxs)(U.a,{className:t.formControl,children:[Object(l.jsx)(de.a,{style:{marginBottom:5},children:"Max games per player per colour"}),Object(l.jsx)(Te,{fn:function(e){Be.gameMax+=e,Be.gameMax<Ne[0]&&(Be.gameMax=Ne[0]),Be.gameMax>Ne[1]&&(Be.gameMax=Ne[1]),f(Be.gameMax),n()},min:Ne[0],max:Ne[1],state:b,disabled:!e.editable})]}),Object(l.jsx)(H.a,{}),Object(l.jsxs)(U.a,{className:t.formControl,children:[Object(l.jsx)(de.a,{children:"Row length to win"}),Object(l.jsx)(he.a,{value:O,onChange:function(e,t){t=Number(t),Be.lineLength=t,x(t),w<t&&N({target:{value:t}}),E<t&&T({target:{value:t}}),n()},row:!0,children:[3,4,5,6].map((function(t){return Object(l.jsx)(me.a,{value:t,control:Object(l.jsx)(je.a,{color:"primary",disabled:!e.editable}),label:t},t)}))})]}),Object(l.jsx)(H.a,{}),Object(l.jsx)(U.a,{className:t.formControl,children:Object(l.jsx)(de.a,{children:"Board Size"})}),Object(l.jsx)("br",{}),Object(l.jsxs)(U.a,{className:t.formControl,children:[Object(l.jsx)(be.a,{value:w,onChange:N,displayEmpty:!0,className:t.select,disabled:!e.editable,children:[3,4,5,6,7,8,9,10].filter((function(e){return e>=O})).map((function(e){return Object(l.jsx)(fe.a,{value:e,children:e},e)}))}),Object(l.jsx)(pe.a,{children:"Columns"})]}),Object(l.jsx)("span",{style:{position:"relative",top:10,fontSize:35},children:"\xd7"}),Object(l.jsxs)(U.a,{className:t.formControl,children:[Object(l.jsx)(be.a,{value:E,onChange:T,displayEmpty:!0,className:t.select,disabled:!e.editable,children:[3,4,5,6,7,8,9,10].filter((function(e){return e>=O})).map((function(e){return Object(l.jsx)(fe.a,{value:e,children:e},e)}))}),Object(l.jsx)(pe.a,{children:"Rows"})]}),Object(l.jsx)(H.a,{}),Object(l.jsxs)(U.a,{className:t.formControl,style:{minWidth:300,paddingRight:10},children:[Object(l.jsx)(de.a,{children:"Turn time"}),Object(l.jsx)(ge.a,{value:L,onChange:function(e,t){Be.turnTime=Se[t],W(t),n()},step:null,marks:Object(se.a)(Se.keys()).map((function(e){return{value:e,label:String(Se[e])}})),min:0,max:Se.length-1,getAriaValueText:Ee,valueLabelFormat:Ee,valueLabelDisplay:"auto",disabled:!e.editable})]}),Object(l.jsx)(H.a,{}),Object(l.jsx)(me.a,{control:Object(l.jsx)(Oe.a,{color:"primary",checked:D,onChange:function(e){Be.runDownTimer=!D,G(!D),n()},disabled:!e.editable}),label:"Always run down turn timer?",labelPlacement:"start"}),Object(l.jsx)(H.a,{}),Object(l.jsx)(me.a,{control:Object(l.jsx)(Oe.a,{color:"primary",checked:q,onChange:function(e){Be.customBots=!q,K(!q),n()},disabled:!e.editable}),label:"Should bots customize?",labelPlacement:"start"}),Object(l.jsx)(H.a,{}),Object(l.jsxs)(U.a,{className:t.formControl,children:[Object(l.jsx)(de.a,{children:"Naming convention"}),Object(l.jsxs)(be.a,{value:Q,onChange:function(e){Be.names=e.target.value,V(e.target.value),n()},disabled:!e.editable,children:[Object(l.jsx)(fe.a,{value:0,children:"Normal"}),Object(l.jsx)(fe.a,{value:1,children:"Gifted"}),Object(l.jsx)(fe.a,{value:2,children:"Random"})]}),Object(l.jsx)(pe.a,{children:{0:"Players use their chosen name",1:"Players' chosen names are shuffled between them",2:"Generates a silly name for each player"}[Q]})]})]})}var Ae={state:{open:!1}};function Le(e,t){return We.apply(this,arguments)}function We(){return(We=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(Object(o.a)({},n?{title:"Match options",description:"Current options (editable by the host):"}:{title:"Create Match",description:"Match options:",buttonText:"Create",buttonAction:function(){Ae.handleClose(),localStorage.MatchOptions=JSON.stringify(Be),Ln.emit("createMatch",Be)}}),Object(l.jsx)(Me,{editable:t,started:n}));case 2:(Ae=e.sent).editable=t;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re={showMatchOptions:Le,changeOptions:function(e){Be=e,window.dispatchEvent(new Event("matchOptionsChanged"))},hostChanged:function(e){Ae.state.open&&Ae.editable!=e&&Le(e,!0)}},ze=Object(q.a)({logoImage:{display:"block",textAlign:"center",margin:"auto",maxWidth:350},controls:{textAlign:"center",border:"1px solid #ffffff1f",borderRadius:10}});var De=function(){var e=ze(),t=function(){var e=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="gU3dUQvGNcE",e.next=3,W({layer:"tutorial",title:"New to 8connect4?",description:Object(l.jsxs)("span",{children:["Watch ",Object(l.jsx)(J.a,{href:"https://youtu.be/".concat(t),target:"_blank",rel:"noopener",children:"this short video"})," for an explanation of 8connect4."]}),buttonText:"Don't show again",buttonAction:function(){n.handleClose(),localStorage.tutorialWatched=!0}},Object(l.jsx)("iframe",{width:"550",height:"300",src:"https://www.youtube.com/embed/".concat(t),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}));case 3:n=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.useEffect((function(){localStorage.hasOwnProperty("tutorialWatched")||t()}),[]),Object(l.jsxs)("div",{children:[Object(l.jsx)(F.a,{className:e.title,variant:"h3",gutterBottom:!0,children:Object(l.jsx)("img",{className:e.logoImage,src:"/iconanimated.png",alt:"8connect4"})}),Object(l.jsxs)(F.a,{variant:"body1",gutterBottom:!0,children:["Play 8 games of connect 4 at once. ",Object(l.jsx)(J.a,{onClick:t,children:"Watch tutorial"})]}),Object(l.jsxs)("div",{className:e.controls,children:[Object(l.jsx)(oe,{}),Object(l.jsx)(H.a,{}),Object(l.jsx)("br",{}),Object(l.jsx)(C.a,{size:"large",color:"primary",onClick:function(){return Ln.emit("findMatch")},children:"Find Match"}),Object(l.jsx)("br",{}),Object(l.jsx)(C.a,{size:"small",color:"secondary",onClick:function(){return Re.showMatchOptions(!0,!1)},children:"Create Match"}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)(ee,{})]})]})},Ge=n(263),Pe=n(264),Je=n(275),Fe=n(265),He=n(194),qe=n(266),Ke=n(267),Ue=n(256),_e=n(268),Ye=n(133),Qe=n.n(Ye),Ve=n(130),Xe=n.n(Ve),Ze=n(132),$e=n.n(Ze),et=n(134),tt=n.n(et),nt=n(131),at=n.n(nt),rt=n(128),ct=n.n(rt),it=n(276),ot=n(262),st=n(34),lt=n(18);function dt(e,t){var n,a="".concat(e).concat("x".repeat(st.length)),r=Object(lt.a)(st);try{for(r.s();!(n=r.n()).done;){var c=n.value;a=a.slice(0,c.char)+t[e][c.key]+a.slice(c.char+1)}}catch(i){r.e(i)}finally{r.f()}return a}for(var ut={},ht=0,mt=["a","b"];ht<mt.length;ht++){ut[mt[ht]]={s:0,c:0,f:0}}var jt=function(){var e=u.a.useState(localStorage.hasOwnProperty("cosmetics")?JSON.parse(localStorage.cosmetics):JSON.parse(JSON.stringify(ut))),t=Object(te.a)(e,2),n=t[0],a=t[1];return Object(l.jsx)("div",{children:["a","b"].map((function(e){var t=dt(e,n);return Object(l.jsxs)("div",{children:[Object(l.jsx)("hr",{}),st.map((function(r){return Object(l.jsx)("div",{children:Object(l.jsx)(it.a,{value:[n[e][r.key]],children:r.available.map((function(c){return Object(l.jsx)(ot.a,{style:{padding:2},onClick:function(){return function(e,t,r){var c=JSON.parse(JSON.stringify(n));c[e][t]=r,a(c),Ln.emit("cosmetics",c),localStorage.cosmetics=JSON.stringify(c)}(e,r.key,c)},value:c,children:Object(l.jsx)("img",{width:30,src:"/counters/".concat(t.slice(0,r.char)+c+t.slice(r.char+1),".png")})})}))})})}))]})}))})},bt=Object(q.a)({root:{textAlign:"center"},privacyIcon:{marginRight:10},table:{width:400,margin:"auto"},head:{backgroundColor:"black"},tableCell:{textAlign:"center"},you:{color:"red",fontWeight:"bold"},counterStyle:{width:20,marginBottom:-5}});var ft=function(e){for(var t=bt(),n=[],a=Ln.id.startsWith(e.matchInfo.host),r=function(r){var c="",i=!1;r in e.matchInfo.players&&(c=e.matchInfo.players[r].name,i=Ln.id.startsWith(e.matchInfo.players[r].id)),n.push(Object(l.jsx)(Ge.a,{children:Object(l.jsxs)(Pe.a,{className:t.tableCell,children:[r in e.matchInfo.players&&e.matchInfo.host==e.matchInfo.players[r].id?Object(l.jsx)(Je.a,{title:"This player is the host. They have the ability to start the game.",children:Object(l.jsx)(Xe.a,{fontSize:"inherit"})}):null,i?Object(l.jsx)("span",{className:t.you,children:c}):c,r in e.matchInfo.players?["a","b"].map((function(n){return Object(l.jsx)("img",{className:t.counterStyle,src:"/counters/".concat(dt(n,e.matchInfo.players[r].cosmetics),".png")})})):null,i?Object(l.jsx)(Je.a,{title:"Change your name",children:Object(l.jsx)(V.a,{size:"small",onClick:function(){return W({title:"Customise"},Object(l.jsxs)("div",{children:[Object(l.jsx)(oe,{}),Object(l.jsx)(jt,{})]}))},children:Object(l.jsx)(at.a,{fontSize:"inherit"})})}):null,r in e.matchInfo.players&&a&&!e.matchInfo.starting&&!i?Object(l.jsxs)("span",{children:[Object(l.jsx)(Je.a,{title:"Kick - remove this player from this lobby.",children:Object(l.jsx)(V.a,{size:"small",onClick:function(){return Ln.emit("kick",e.matchInfo.players[r].id)},children:Object(l.jsx)(G.a,{fontSize:"inherit"})})}),e.matchInfo.players[r].bot?null:Object(l.jsx)(Je.a,{title:"Promote - transfer your host privileges to this player.",onClick:function(){return Ln.emit("promote",e.matchInfo.players[r].id)},children:Object(l.jsx)(V.a,{size:"small",children:Object(l.jsx)($e.a,{fontSize:"inherit"})})})]}):null]})},r))},c=0;c<e.matchInfo.options.players;c++)r(c);u.a.useEffect((function(){Re.hostChanged(a)})),e.matchInfo.starting&&new Audio("/countdown/".concat(e.matchInfo.startTimer,".mp3")).play();var i="Copy a link others can use to join this lobby to your clipboard.",o=u.a.useState(i),s=Object(te.a)(o,2),d=s[0],h=s[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)(V.a,{onClick:function(){return window.location.reload()},children:Object(l.jsx)(Qe.a,{})}),Object(l.jsxs)("div",{className:t.root,children:[Object(l.jsx)(F.a,{variant:"overline",display:"block",gutterBottom:!0,children:"Room code"}),Object(l.jsxs)(F.a,{variant:"h3",gutterBottom:!0,children:[Object(l.jsx)("span",{className:t.privacyIcon,children:e.matchInfo.options.public?Object(l.jsx)(Je.a,{title:"This is a public match. Anyone can join this match from the 'Find Match' button on the homepage.",children:Object(l.jsx)(ye.a,{})}):Object(l.jsx)(Je.a,{title:"This is a private match. Only people with the room code can join.",children:Object(l.jsx)(we.a,{})})}),e.matchInfo.code,Object(l.jsx)(Je.a,{title:d,children:Object(l.jsx)(V.a,{onClick:function(){ct()("".concat(window.location.protocol,"//").concat(window.location.host,"?").concat(e.matchInfo.code)),h("Copied to clipboard!"),setTimeout((function(){h(i)}),3e3)},children:Object(l.jsx)(tt.a,{})})})]}),Object(l.jsx)(C.a,{color:"secondary",onClick:function(){return Re.showMatchOptions(a,!0)},children:"Match options"}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),e.matchInfo.starting?Object(l.jsxs)(F.a,{variant:"h4",children:["Starting in ",e.matchInfo.startTimer,"..."]}):Object(l.jsx)(Je.a,{title:a?"Begin a timer to start the match. No more players will be able to join.":"Only the host can start the match.",children:Object(l.jsx)("span",{children:Object(l.jsx)(C.a,{color:a?"primary":"default",size:"large",onClick:function(){return Ln.emit("startMatch")},disabled:!a,children:"Start Match"})})}),Object(l.jsx)(Fe.a,{component:He.a,children:Object(l.jsxs)(qe.a,{children:[Object(l.jsx)(Ke.a,{children:Object(l.jsx)(Ge.a,{className:t.head,children:Object(l.jsxs)(Pe.a,{className:t.tableCell,children:["Players: ",e.matchInfo.players.length,"/",e.matchInfo.options.players,function(){var e=u.a.useState(null),t=Object(te.a)(e,2),n=t[0],r=t[1],c=Boolean(n);return Object(l.jsx)("span",{children:a?Object(l.jsxs)("span",{children:[Object(l.jsx)(Je.a,{title:"Add bot",children:Object(l.jsx)(V.a,{size:"small",onClick:function(e){r(e.currentTarget)},children:"\ud83e\udd16"})}),Object(l.jsx)(Ue.a,{open:c,anchorEl:n,onClose:function(){r(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(l.jsx)(le.a,{variant:"text",color:"default","aria-label":"text primary button group",children:["Easy","Medium","Hard"].map((function(e,t){return Object(l.jsx)(C.a,{onClick:function(){return Ln.emit("bot",t)},children:e})}))})})]}):null})}()]})})}),Object(l.jsx)(_e.a,{children:n})]})})]})]})},pt=(n(192),Object(q.a)({gameInfo:{display:"flex",width:"100%",marginBottom:20,margin:"auto",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,backgroundColor:"black",borderBottom:"1px solid #ffffff1f",zIndex:100,"& div":{flexGrow:1}},gameInfoTitle:{textAlign:"center"},gameInfoContent:{display:"flex",alignItems:"end",justifyContent:"center"},title:{textAlign:"center"},colourIndicator:{height:49},playerArea:{paddingTop:8,paddingBottom:8,marginBottom:16,textAlign:"center",border:"1px solid #ffffff1f",borderRadius:10},selfGameImage:{maxWidth:125,maxHeight:125,width:"auto",height:"auto"},otherGameImage:{maxWidth:100,maxHeight:100,width:"auto",height:"auto"},playingGamesContainer:{},playingGames:{display:"flex",maxWidth:600,margin:"auto",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},otherGamesContainer:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},otherGames:{display:"flex",maxWidth:600,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},vsMe:{color:"red"}}));function gt(e){var t=pt(),n=Object.keys(e.game.playerIDs).find((function(t){return e.playerId.startsWith(e.game.playerIDs[t])})),a=e.players.find((function(t){return t.id.startsWith(e.game.playerIDs["a"==n?"b":"a"])}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("img",{"data-playercolour":e.playerColour,className:"".concat(e.self?"self-game ":"").concat(e.self?t.selfGameImage:t.otherGameImage," ").concat(e.self&&1==e.games.length&&"b"==e.playerColour?"game-b":"game-".concat(n)," game").concat(e.game.id)}),Object(l.jsxs)(F.a,{variant:"caption",display:"block",children:["Game ",e.game.name," vs ",e.myId.startsWith(a.id)?Object(l.jsx)("span",{className:t.vsMe,children:a.name}):a.name]})]})}function Ot(e){return Object(l.jsx)("svg",{height:e.size,width:e.size,children:Object(l.jsx)("circle",{id:"playerTurnIndicator-".concat(e.player),cx:e.size/2,cy:e.size/2,r:e.size/2,fill:"red"})})}function xt(e){var t=pt(),n=e.self?t.playingGames:t.otherGames;return Object(l.jsxs)("div",{className:t.playerArea,children:[e.self?Object(l.jsxs)("div",{children:[Object(l.jsxs)(F.a,{variant:"h4",children:[e.player.name," ",Object(l.jsx)(Ot,{size:23,player:e.player.id.slice(0,6)})]}),Object(l.jsx)(H.a,{})]}):Object(l.jsxs)(F.a,{variant:"h6",gutterBottom:!0,children:[e.player.name," ",Object(l.jsx)(Ot,{size:14,player:e.player.id})]}),Object(l.jsxs)("div",{className:e.self?t.playingGamesContainer:t.otherGamesContainer,children:[Object(l.jsxs)("div",{className:n,children:[e.self?Object(l.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-a"),src:"/counters/".concat(dt("a",e.player.cosmetics),".png")}):null,e.games.filter((function(t){return e.player.id.startsWith(t.playerIDs.a)})).map((function(t){return Object(l.jsx)(gt,{self:e.self,game:t,games:e.games,players:e.players,playerColour:"a",playerId:e.player.id,myId:e.myId})})),e.self?null:Object(l.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-a"),src:"/counters/".concat(dt("a",e.player.cosmetics),".png")})]}),e.self?Object(l.jsx)("div",{id:"controller",className:t.controls}):null,Object(l.jsxs)("div",{className:n,children:[Object(l.jsx)("img",{className:"".concat(t.colourIndicator," colour-indicator-b"),src:"/counters/".concat(dt("b",e.player.cosmetics),".png")}),e.games.filter((function(t){return e.player.id.startsWith(t.playerIDs.b)})).map((function(t){return Object(l.jsx)(gt,{self:e.self,game:t,games:e.games,players:e.players,playerColour:"b",playerId:e.player.id,myId:e.myId})}))]})]})]})}var yt=function(e){var t=pt(),n=e.players.find((function(t){return e.myId.startsWith(t.id)}));return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:t.gameInfo,children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:t.gameInfoTitle,children:Object(l.jsx)(F.a,{variant:"subtitle1",children:"Ongoing games"})}),Object(l.jsxs)("div",{className:t.gameInfoContent,children:[Object(l.jsx)(F.a,{variant:"h3",children:Object(l.jsx)("span",{id:"gamesLeft",children:"0"})}),Object(l.jsxs)(F.a,{variant:"h5",children:["/",Object(l.jsx)("span",{id:"maxGames",children:"0"})]})]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:t.gameInfoTitle,children:Object(l.jsx)(F.a,{variant:"subtitle1",children:"Turn time left"})}),Object(l.jsx)("div",{className:t.gameInfoContent,children:Object(l.jsx)(F.a,{variant:"h3",children:Object(l.jsx)("span",{id:"turnTime",children:"0"})})})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:t.gameInfoTitle,children:Object(l.jsx)(F.a,{variant:"subtitle1",children:"Turn"})}),Object(l.jsx)("div",{className:t.gameInfoContent,children:Object(l.jsxs)(F.a,{variant:"h3",children:[Object(l.jsx)("img",{height:"35",id:"turnIndicator"}),Object(l.jsx)("span",{id:"turnNumber",children:"0"})]})})]})]}),Object(l.jsxs)("div",{children:[Object(l.jsxs)(F.a,{variant:"h2",style:{textAlign:"center"},children:[e.games.filter((function(t){return e.players[0].id.startsWith(t.playerIDs.a)})).length+e.games.filter((function(t){return e.players[0].id.startsWith(t.playerIDs.b)})).length,"connect",e.matchInfo.options.lineLength]}),Object(l.jsx)(xt,{player:n,players:e.players,games:e.games,self:!0,myId:e.myId}),e.players.filter((function(t){return!e.myId.startsWith(t.id)})).map((function(t){return Object(l.jsx)(xt,{player:t,players:e.players,games:e.games,self:!1,myId:e.myId})}))]})]})},vt=n(135),wt=n.n(vt),It=Object(q.a)({root:{textAlign:"center"},tableCell:{textAlign:"center"},gamesContainer:{display:"flex",flexWrap:"wrap",justifyContent:"center","& div":{marginLeft:25,marginRight:25}},gameImage:{width:150},counterImage:{height:10},you:{color:"red"},otherPlayer:{}});var Ct=function(e){for(var t=It(),n=function(n){return e.myId.startsWith(n.id)?t.you:t.otherPlayer},a=0,r=1;r<e.results.length&&e.results[r].score==e.results[0].score;r++)a=r;return new Audio("/endMatch.mp3").play(),Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:t.root,children:[Object(l.jsx)(V.a,{onClick:function(){return window.location.reload()},children:Object(l.jsx)(wt.a,{})}),Object(l.jsxs)(F.a,{variant:"h2",children:["Winner",0==a?"":"s",":"]}),Object(l.jsx)(F.a,{variant:"h4",gutterBottom:!0,children:e.results.slice(0,a+1).map((function(e){return e.name})).join(", ")}),Object(l.jsx)(Fe.a,{component:He.a,children:Object(l.jsx)(qe.a,{children:Object(l.jsx)(_e.a,{children:e.results.map((function(n){return Object(l.jsx)(Ge.a,{children:Object(l.jsxs)(Pe.a,{className:t.tableCell,children:[n.placement,". ",e.myId.startsWith(n.id)?Object(l.jsx)("span",{className:t.you,children:n.name}):n.name," with a score of ",n.score,"."]})})}))})})}),Object(l.jsx)(C.a,{color:"primary",size:"large",style:{margin:"16px 0"},onClick:function(){return Ln.emit("rejoin",e.rjCode,e.matchInfo.options)},children:"Play again"}),Object(l.jsx)(H.a,{}),Object(l.jsx)(F.a,{variant:"h3",children:"Games"}),Object(l.jsx)("div",{className:t.gamesContainer,children:e.games.map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("img",{src:e.src,className:t.gameImage}),Object(l.jsxs)(F.a,{variant:"caption",display:"block",children:["Game ",e.name,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:n(e.players.a),children:e.players.a.name})," ",Object(l.jsx)("img",{className:t.counterImage,src:"/counters/".concat(dt("a",e.players.a.cosmetics),".png")})," vs ",Object(l.jsx)("img",{className:t.counterImage,src:"/counters/".concat(dt("b",e.players.b.cosmetics),".png")})," ",Object(l.jsx)("span",{className:n(e.players.b),children:e.players.b.name})]})]})}))})]})})};for(var Nt={counters:{},a:new Image,b:new Image,hover:{},outcomeOverlay:{}},kt=0,St=["a","b"];kt<St.length;kt++){var Et=St[kt];Nt.hover[Et]=[];var Bt,Tt=Object(lt.a)(st.find((function(e){return"c"==e.key})).available);try{for(Tt.s();!(Bt=Tt.n()).done;){var Mt=Bt.value;"/".concat(Et,".png");Nt.hover[Et].push(new Image),Nt.hover[Et][Nt.hover[Et].length-1].src="/hover_".concat(Et).concat(Mt,".png")}}catch(Wn){Tt.e(Wn)}finally{Tt.f()}Nt.counters[Et]=[];var At,Lt=Object(lt.a)(st[0].available);try{for(Lt.s();!(At=Lt.n()).done;){var Wt,Rt=At.value,zt=[],Dt=Object(lt.a)(st[1].available);try{for(Dt.s();!(Wt=Dt.n()).done;){var Gt,Pt=Wt.value,Jt=[],Ft=Object(lt.a)(st[2].available);try{for(Ft.s();!(Gt=Ft.n()).done;){var Ht=Gt.value,qt=new Image;qt.src="/counters/".concat(Et).concat(Pt).concat(Rt).concat(Ht,".png"),Jt.push(qt)}}catch(Wn){Ft.e(Wn)}finally{Ft.f()}zt.push(Jt)}}catch(Wn){Dt.e(Wn)}finally{Dt.f()}Nt.counters[Et].push(zt)}}catch(Wn){Lt.e(Wn)}finally{Lt.f()}}for(var Kt=0,Ut=["win","loss","draw","end"];Kt<Ut.length;Kt++){var _t=Ut[Kt],Yt=new Image;Yt.src="/outcome/".concat(_t,".png"),Nt.outcomeOverlay[_t]=Yt}var Qt,Vt=Nt,Xt=100,Zt=7,$t=document.createElement("canvas");$t.width=104*Zt+4,$t.height=108;var en=$t.getContext("2d"),tn=null,nn="a";function an(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;en.clearRect(0,0,$t.width,$t.height),en.fillStyle="white";for(var t=0;t<Zt+1;t++)en.fillRect(104*t,0,4,$t.height);for(var n=0;n<2;n++)en.fillRect(0,104*n,$t.width,4);if(null!=e){e.type.startsWith("touch")&&(e=e.changedTouches[0]);var a=e.target.getBoundingClientRect(),r=(e.clientX-a.left-4)*($t.width/a.width),c=(e.clientY-a.top-4)*($t.height/a.height);if(r<0||c<0)return;if(c>=Xt)return;if(r%104>=Xt)return;var i=Math.floor(r/104);tn!=i&&(tn=i,Ln.emit("hover",tn))}if(null!=tn){var o=Qt[nn];o.complete&&en.drawImage(o,4+104*tn,4,Xt,Xt)}}function rn(){Ln.emit("move",nn,tn),tn=null,Ln.emit("hover",tn),an()}an(),$t.addEventListener("mousemove",an),$t.addEventListener("touchstart",an),$t.addEventListener("touchmove",an),$t.addEventListener("touchend",rn),$t.addEventListener("mousedown",rn);var cn,on,sn,ln=50,dn="123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",un=new Audio("/place.mp3"),hn=new Audio("/otherPlace.mp3"),mn=new Audio("/endGame.mp3"),jn=new Audio("/startTurn.mp3"),bn=[],fn=[],pn=0,gn="a",On=Date.now(),xn=document.createElement("canvas"),yn=xn.getContext("2d");function vn(){var e=(On-Date.now())/1e3;e<0&&(e=0),document.getElementById("turnTime").innerHTML=e.toFixed(2)}function wn(e,t){on=t,cn=e,xn.width=ln*cn.columns+4*(cn.columns+1),xn.height=54*(cn.rows+1),yn.font="30px Roboto",yn.textAlign="center",yn.textBaseline="middle",pn=0;var n=function(t){for(var n=e.games[t],a=[],r=0;r<cn.rows;r++){for(var c=[],i=0;i<cn.columns;i++)c.push(null);a.push(c)}bn.push({id:t,name:t+1>dn.length?"".concat(dn[~~(t/dn.length)]).concat(dn[t%dn.length]):dn[t],playerIDs:n.players,players:Object.fromEntries(Object.keys(n.players).map((function(e){return[e,cn.players.find((function(t){return t.id==n.players[e]}))]}))),state:a,order:JSON.parse(JSON.stringify(a))})};for(var a in e.games)n(a);sn=bn.length,m.a.render(Object(l.jsxs)(b.a,{theme:r,children:[Object(l.jsx)(j.a,{}),Object(l.jsx)(yt,{matchInfo:cn,players:e.players,games:bn,myId:on})]}),document.getElementById("root"),(function(){var t,n;for(var a in t=e,n=Object.fromEntries(["a","b"].map((function(e){return[e,kn(bn.find((function(t){return on.startsWith(t.playerIDs[e])})),e)]}))),Qt=n,Zt=t.columns,$t.width=104*Zt+4,document.getElementById("controller").appendChild($t),$t.style.touchAction="none",document.getElementById("maxGames").innerHTML=sn,document.getElementById("gamesLeft").innerHTML=sn,bn)Bn(a);fn.timer=setInterval(vn,1e3/24),new Audio("/startMatch.mp3").play()}))}function In(e){document.getElementById("turnNumber").innerHTML=++pn,gn=e,On=Date.now()+cn.turnTime;for(var t=0,n=[].concat(Object(se.a)(document.getElementsByClassName("game-".concat("a"==gn?"b":"a"))),Object(se.a)(document.getElementsByClassName("colour-indicator-".concat("a"==gn?"b":"a"))));t<n.length;t++){n[t].classList.add("inactive-game")}for(var a=0,r=[].concat(Object(se.a)(document.getElementsByClassName("game-".concat(gn))),Object(se.a)(document.getElementsByClassName("colour-indicator-".concat(gn))));a<r.length;a++){r[a].classList.remove("inactive-game")}setTimeout((function(){for(var e=0,t=[].concat(Object(se.a)(document.getElementsByClassName("game-".concat("a"==gn?"b":"a"))),Object(se.a)(document.getElementsByClassName("colour-indicator-".concat("a"==gn?"b":"a"))));e<t.length;e++){t[e].classList.add("inactive-game")}for(var n=0,a=[].concat(Object(se.a)(document.getElementsByClassName("game-".concat(gn))),Object(se.a)(document.getElementsByClassName("colour-indicator-".concat(gn))));n<a.length;n++){a[n].classList.remove("inactive-game")}}),50);var c,i=Object(lt.a)(bn);try{for(i.s();!(c=i.n()).done;){c.value.hover=null}}catch(Wn){i.e(Wn)}finally{i.f()}document.getElementById("turnIndicator").src="/".concat(gn,".png"),function(e){nn=e,tn=null,an()}(gn),pn>1&&jn.play()}function Cn(e,t,n){e.complete&&yn.drawImage(e,54*Number(t)+4,54*(Number(n)+1),ln,ln)}function Nn(e,t,n,a,r){var c=e[t][n];if(null===c)return null;for(var i=[],o=1;o<cn.lineLength;o++)i.push([t+o*a,n+o*r]);return i.every((function(t){return e[t[0]][t[1]]===c}))?[[t,n]].concat(i):null}function kn(e,t){var n=e.players[t].cosmetics[t];return Vt.counters[t][n.c][n.s][n.f]}var Sn={a:["f58600","ff0010","ffd700","ff1a96"],b:["03ffff","2415ff","00ff00","0fff7d"]};function En(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];yn.clearRect(0,0,xn.width,xn.height),yn.fillStyle="white";for(var r=0;r<=cn.rows;r++)yn.fillRect(0,ln+54*r,xn.width,4);for(var c=0;c<=cn.columns;c++)yn.fillRect(54*c,ln,4,xn.height-ln);for(var i in e.state)for(var o in e.state[i]){var s=e.state[i][o];null!=s&&(Cn(kn(e,s),o,i),a&&(yn.fillStyle="white",yn.fillText(String(e.order[i][o]),54*Number(o)+4+25,54*(Number(i)+1)+25+3)))}if(null!==e.hover){Cn(kn(e,gn),e.hover,-1);for(var l=null,d=0;d<cn.rows;d++)if(null!=e.state[d][e.hover]){l=d-1;break}-1==l&&(l=!1),null==l&&(l=cn.rows-1),!1!==l&&(Vt.hover[gn][e.players[gn].cosmetics[gn].c].complete&&(yn.globalAlpha=.15,yn.drawImage(Vt.hover[gn][e.players[gn].cosmetics[gn].c],54*Number(e.hover)+4,54,ln,54*(Number(l)+1)-4)),yn.globalAlpha=.5,Cn(kn(e,gn),e.hover,l),yn.globalAlpha=1)}if(!n){for(var u,h=[],m=0;m<=cn.rows-cn.lineLength;m++)for(var j=0;j<cn.columns;j++){var b=Nn(e.state,m,j,1,0);null!=b&&(u=e.state[m][j],h=h.concat(b))}for(var f=0;f<cn.rows;f++)for(var p=0;p<=cn.columns-cn.lineLength;p++){var g=Nn(e.state,f,p,0,1);null!=g&&(u=e.state[f][p],h=h.concat(g))}for(var O=0;O<=cn.rows-cn.lineLength;O++)for(var x=0;x<=cn.columns-cn.lineLength;x++){var y=Nn(e.state,O,x,1,1);null!=y&&(u=e.state[O][x],h=h.concat(y))}for(var v=cn.rows-(cn.rows-cn.lineLength+1);v<cn.rows;v++)for(var w=0;w<=cn.columns-cn.lineLength;w++){var I=Nn(e.state,v,w,-1,1);null!=I&&(u=e.state[v][w],h=h.concat(I))}var C,N=[],k=Object(lt.a)(h);try{var S=function(){var t=C.value;N.some((function(e){return JSON.stringify(e)==JSON.stringify(t)}))||(N.push(t),yn.fillStyle="#"+Sn[u][e.players[u].cosmetics[u].c]+"af",yn.fillRect(54*t[1]+4,54*(t[0]+1),ln,ln))};for(k.s();!(C=k.n()).done;)S()}catch(Wn){k.e(Wn)}finally{k.f()}}if(null!=t&&t.complete){yn.globalAlpha=.75,yn.fillStyle="#6060607B",yn.fillRect(4,54,54*cn.columns-4,54*cn.rows-4),yn.fillStyle="black",yn.fillRect(0,ln,xn.width,4),yn.fillRect(0,xn.height-4,xn.width,4),yn.fillRect(0,54,4,xn.height-ln-8),yn.fillRect(xn.width-4,54,4,xn.height-ln-8);var E=t.width/t.height,B=xn.width-8,T=B/E;T>xn.height&&(B=(T=xn.height-58)*E);var M=B<xn.width?(xn.width-B)/2:0,A=T<xn.height?(xn.height+ln-T)/2:0;yn.drawImage(t,M,A,B,T),yn.globalAlpha=1,yn.setTransform(1,0,0,1,0,0)}return xn.toDataURL()}function Bn(e){var t,n=En(bn[e]),a=Object(lt.a)(document.getElementsByClassName("game".concat(e)));try{for(a.s();!(t=a.n()).done;){t.value.src=n}}catch(Wn){a.e(Wn)}finally{a.f()}}var Tn=p()(g,{transports:["websocket"]}),Mn=!1;function An(e){setTimeout((function(){Tn.disconnected&&(m.a.render(Object(l.jsxs)(b.a,{theme:r,children:[Object(l.jsx)(j.a,{}),Object(l.jsx)(P,{error:e.toString()})]}),document.getElementById("root")),Tn.disconnect())}),1e4)}m.a.render(Object(l.jsxs)(b.a,{theme:r,children:[Object(l.jsx)(j.a,{}),Object(l.jsx)(z,{})]}),document.getElementById("root")),Tn.on("connect",(function(){Mn||(Mn=!0,m.a.render(Object(l.jsxs)(b.a,{theme:r,children:[Object(l.jsx)(j.a,{}),Object(l.jsx)(De,{})]}),document.getElementById("root")),localStorage.hasOwnProperty("cosmetics")&&Tn.emit("cosmetics",JSON.parse(localStorage.cosmetics)))})),Tn.on("connect_error",An),Tn.on("connect_timeout",An),Tn.on("disconnect",An),Tn.on("err",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error:";W({layer:"err",title:t,description:e})})),Tn.on("noMatches",Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W({title:"No public matches available.",description:"Maybe create one yourself for people to join?",buttonText:"Create match with default options",buttonAction:function(){t.handleClose(),Tn.emit("createMatch",Object(o.a)(Object(o.a)({},Ie),{},{public:!0}))}});case 2:t=e.sent;case 3:case"end":return e.stop()}}),e)})))),Tn.on("kicked",(function(e){W({required:!0,title:"Kicked!",description:"".concat(e," kicked you from the lobby."),buttonText:"Back Home",buttonAction:function(){return window.location.reload()}})})),Tn.on("joinMatch",(function(){})),Tn.on("matchUpdate",(function(e){e.started||m.a.render(Object(l.jsxs)(b.a,{theme:r,children:[Object(l.jsx)(j.a,{}),Object(l.jsx)(ft,{matchInfo:e})]}),document.getElementById("root")),Re.changeOptions(e.options)})),Tn.on("matchStart",(function(e){return wn(e,Tn.id)})),Tn.on("turnSwitch",(function(e){return In(e)})),Tn.on("hover",(function(e,t,n){return function(e,t,n){t==gn&&(bn[e].hover=n),Bn(e)}(e,t,n)})),Tn.on("move",(function(e,t,n,a){return function(e,t,n,a){var r=bn[e];r.state[n][a]=t,r.order[n][a]=pn,r.hover=null,Bn(e),on.startsWith(r.players[t].id)||hn.play()}(e,t,n,a)})),Tn.on("ts",(function(e,t){return function(e,t){document.getElementById("playerTurnIndicator-".concat(e)).setAttribute("fill",t?"green":"red")}(e,t)})),Tn.on("takenTurn",(function(e){return function(e){if(un.play(),e==gn){var t,n=Object(lt.a)(document.querySelectorAll(".self-game.game-".concat(e)));try{for(n.s();!(t=n.n()).done;)t.value.classList.add("inactive-game")}catch(Wn){n.e(Wn)}finally{n.f()}}}(e)})),Tn.on("outcomeDecided",(function(e,t){return function(e,t){document.getElementById("gamesLeft").innerHTML=--sn,bn[e].outcome=t;var n,a=Object(lt.a)(document.getElementsByClassName("game".concat(e)));try{for(a.s();!(n=a.n()).done;){var r=n.value;r.classList.add("game-outcome-decided");var c=void 0;0==t?c="draw":t==r.getAttribute("data-playercolour")?c="win":c="loss",r.src=En(bn[e],Vt.outcomeOverlay[c],0==t)}}catch(Wn){a.e(Wn)}finally{a.f()}mn.play()}(e,t)})),Tn.on("endMatch",(function(e,t){return function(e,t){for(var n in fn)clearInterval(fn[n]),delete fn[n];var a,c=Object(lt.a)(bn);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.src=En(i,null,0==i.outcome,!0)}}catch(Wn){c.e(Wn)}finally{c.f()}bn.sort((function(e,t){return dn.indexOf(e.name)-dn.indexOf(t.name)})),m.a.render(Object(l.jsxs)(b.a,{theme:r,children:[Object(l.jsx)(j.a,{}),Object(l.jsx)(Ct,{myId:on,results:e,matchInfo:cn,games:bn,rjCode:t})]}),document.getElementById("root")),cn=null,bn=[],fn=[]}(e,t)})),Tn.on("rejoin",(function(e){return window.location.href="/?".concat(e)}));var Ln=Tn},34:function(e){e.exports=JSON.parse('[{"key":"c","name":"Colour","char":2,"available":[0,1,2,3]},{"key":"s","name":"Shape","char":1,"available":[0,1,2]},{"key":"f","name":"Filled","char":3,"available":[0,1]}]')},80:function(e){e.exports=JSON.parse('{"public":false,"players":9,"gameMax":4,"turnTime":30,"runDownTimer":false,"customBots":false,"lineLength":4,"columns":7,"rows":6,"names":0}')}},[[193,1,2]]]);
//# sourceMappingURL=main.51bbf7e6.chunk.js.map